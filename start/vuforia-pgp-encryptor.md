---
layout: page
title: Vuforia PGP Encryptor
nav_order: 23
nav_subpage: 1
---

<script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.min.js">
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/openpgp/2.3.2/openpgp.js">
</script>

<style>
textarea {
  width: 100%;
  min-height: 150px;
  display: block;
}
</style>

### Vuforia Key
This tool allows you to encrypt your vuforia license key so that you can leverage Vuforia's computer vision functionality in your web-apps running in the Argon browser. Make sure you don't accidentally publish your license key (i.e, don't store the plaintext json generated by this tool in a public folder on your server). 
<textarea id="key" placeholder="AXRIsu7/////AAAAAaYn+sFgpkAomH+Z+tK/Wsc8D+x60P90Nz8Oh0J8onzjVUIP5RbYjdDfyatmpnNgib3xGo1v8iWhkU1swiCaOM9V2jmpC4RZommwQzlgFbBRfZjV8DY3ggx9qAq8mijhN7nMzFDMgUhOlRWeN04VOcJGVUxnKn+R+oot1XTF5OlJZk3oXK2UfGkZo5DzSYafIVA0QS3Qgcx6j2qYAa/SZcPqiReiDM9FpaiObwxV3/xYJhXPUGVxI4wMcDI0XBWtiPR2yO9jAnv+x8+p88xqlMH8GHDSUecG97NbcTlPB0RayGGg1F6Y7v0/nQyk1OIp7J8VQ2YrTK25kKHST0Ny2s3M234SgvNCvnUH+EXAMPLE">
</textarea>

### Allowed Origins
Allow your key to be used from these HTTP origins (web sites). Origins are matched using [minimatch](https://github.com/isaacs/minimatch) glob patterns (the domain and path are each evaluated separately). Commas or whitespace can be used as pattern separators. The following characters have special magic meaning when used in a
path portion:

* `*` Matches 0 or more characters in a single path portion
* `?` Matches 1 character
* `[...]` Matches a range of characters, similar to a RegExp range.
  If the first character of the range is `!` or `^` then it matches
  any character not in the range.
* `!(pattern|pattern|pattern)` Matches anything that does not match
  any of the patterns provided.
* `?(pattern|pattern|pattern)` Matches zero or one occurrence of the
  patterns provided.
* `+(pattern|pattern|pattern)` Matches one or more occurrences of the
  patterns provided.
* `*(a|b|c)` Matches zero or more occurrences of the patterns provided
* `@(pattern|pat*|pat?erN)` Matches exactly one of the patterns
  provided
* `**` If a "globstar" is alone in a path portion, then it matches
  zero or more directories and subdirectories searching for matches.

<textarea id="origins" placeholder="?(*.)example.com/**, www.myothersite.com/demo/**">
</textarea>

### License Data (JSON)
<textarea id="json">
</textarea>

### License Data (encrypted)
<textarea id="encrypted">
</textarea>

<script>
var hkp = new openpgp.HKP('https://pgp.mit.edu');

var options = {
    query: 'secure@argonjs.io'
};

var keyElement = document.getElementById('key');
var originsElement = document.getElementById('origins');
var jsonElement = document.getElementById('json')
var encryptedElement = document.getElementById('encrypted')

var pubkey;

function updateLicenseData() {
  var key = keyElement.value;
  var origins = originsElement.value.split(/\s*[\s,]\s*/).filter(function(origin){return origin});
  
  var json = jsonElement.value = JSON.stringify({
    key: key, 
    origins: (origins && origins.length > 0) ? origins : undefined
  }, null, '\t');
  
  var options = {
    data: json,
    publicKeys: pubkey.keys,
  };
  
  localStorage.setItem('licenseData', json);
  
  openpgp.encrypt(options).then(function(ciphertext) {
      encryptedElement.value = ciphertext.data;
  });
}

function updateFields() {
  const data = JSON.parse(jsonElement.value);
  keyElement.value = data.key;
  originsElement.value = (data.origins && data.origins.length > 0 && data.origins.join('\n')) || '';
  updateLicenseData();
}

hkp.lookup(options).then(function(key) {
    pubkey = openpgp.key.readArmored(key);
    keyElement.addEventListener('input', updateLicenseData);
    originsElement.addEventListener('input', updateLicenseData);
    jsonElement.addEventListener('input', updateFields);
    if (jsonElement.value) updateFields();
});

jsonElement.value = localStorage.getItem('licenseData');

</script>

